!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(5)},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);var r={insert:"head",singleton:!1};n(4)(i,r);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".w-container {\n  margin: 0 auto;\n  width: 600px;\n}\n\ntextarea {\n  resize: none;\n}\n\n.lds-ripple {\n  display: inline-block;\n  position: relative;\n  width: 64px;\n  height: 64px;\n}\n.lds-ripple div {\n  position: absolute;\n  border: 4px solid #4caf50;\n  opacity: 1;\n  border-radius: 50%;\n  animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n}\n.lds-ripple div:nth-child(2) {\n  animation-delay: -0.5s;\n}\n@keyframes lds-ripple {\n  0% {\n      top: 28px;\n      left: 28px;\n      width: 0;\n      height: 0;\n      opacity: 1;\n  }\n  100% {\n      top: -1px;\n      left: -1px;\n      width: 58px;\n      height: 58px;\n      opacity: 0;\n  }\n}\n\n.loader-wrap {\n  display: flex;\n  padding-top: 50px;\n  justify-content: center;\n}\n\n.w-panel-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.multi-line {\n  white-space: pre-line;\n}\n\n.hide {\n  display: none !important;\n}\n\n.center{\n  text-align: center;\n}",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(o=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),s=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot).concat(t," */")}));return[n].concat(s).concat([r]).join("\n")}var o,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var o=0;o<t.length;o++){var a=t[o];null!=a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="(".concat(a[2],") and (").concat(n,")")),e.push(a))}},e}},function(t,e,n){"use strict";var i,r={},s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}();function a(t,e){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],o=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function c(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=r[i.id],o=0;if(s){for(s.refs++;o<s.parts.length;o++)s.parts[o](i.parts[o]);for(;o<i.parts.length;o++)s.parts.push(m(i.parts[o],e))}else{for(var a=[];o<i.parts.length;o++)a.push(m(i.parts[o],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var i=n.nc;i&&(t.attributes.nonce=i)}if(Object.keys(t.attributes).forEach((function(n){e.setAttribute(n,t.attributes[n])})),"function"==typeof t.insert)t.insert(e);else{var r=o(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function p(t,e,n){var i=n.css,r=n.media,s=n.sourceMap;if(r&&t.setAttribute("media",r),s&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var h=null,v=0;function m(t,e){var n,i,r;if(e.singleton){var s=v++;n=h||(h=l(e)),i=f.bind(null,n,s,!1),r=f.bind(null,n,s,!0)}else n=l(e),i=p.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s());var n=a(t,e);return c(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var o=n[s],l=r[o.id];l&&(l.refs--,i.push(l))}t&&c(a(t,e),e);for(var u=0;u<i.length;u++){var d=i[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete r[d.id]}}}}},function(t,e,n){"use strict";n.r(e);class i{constructor(t){this.$el=document.getElementById(t),this.init()}init(){}onShow(){}onHide(){}hide(){this.$el.classList.add("hide"),this.onHide()}show(){this.$el.classList.remove("hide"),this.onShow()}}function r(){localStorage.setItem("visited",JSON.stringify(!0)),this.hide()}n(1);function s(t){if(t.preventDefault(),t.target.classList.contains("tab")){Array.from(this.$el.querySelectorAll(".tab")).forEach(t=>{t.classList.remove("active")}),t.target.classList.add("active");const e=this.tabs.find(e=>e.name===t.target.dataset.name);this.tabs.forEach(t=>t.component.hide()),e.component.show()}}class o{constructor(t,e){this.form=t,this.controls=e}value(){const t={};return Object.keys(this.controls).forEach(e=>{t[e]=this.form[e].value}),t}clear(){Object.keys(this.controls).forEach(t=>{this.form[t].value=""})}isValid(){let t=!0;return Object.keys(this.controls).forEach(e=>{const n=this.controls[e];let i=!0;n.forEach(t=>{i=t(this.form[e].value)&&i}),i?a(this.form[e]):function(t){a(t);t.classList.add("invalid"),t.insertAdjacentHTML("afterend",'<p class="validation-error">Input corect values</p>')}(this.form[e]),t=t&&i}),t}}function a(t){t.classList.remove("invalid"),t.nextSibling&&t.closest(".form-control").removeChild(t.nextSibling)}class c{static required(t=""){return t&&t.trim()}static minLength(t){return e=>e.length>=t}}async function l(t){const e=await fetch(t);return await e.json()}const u=new class{constructor(t){this.url=t}async createPost(t){try{return l(new Request(this.url+"/posts.json",{method:"post",body:JSON.stringify(t)}))}catch(t){console.error(t)}}async fetchPosts(){try{return l(new Request(`${this.url}/posts.json`,{method:"get"}))}catch(t){console.log(t)}}async fetchPostById(t){try{return l(new Request(`${this.url}/posts/${t}.json`,{method:"get"}))}catch(t){console.log(t)}}}("https://js-blog-33df3.firebaseio.com");async function d(t){if(t.preventDefault(),this.form.isValid()){const t={type:this.$el.type.value,date:(new Date).toLocaleDateString(),...this.form.value()};await u.createPost(t),this.form.clear(),alert("Post create!")}}function f(t,e={}){const n="news"===t.type?'<li class="tag tag-blue tag-rounded">Новость</li>':'<li class="tag tag-rounded">Заметка</li>',i=(JSON.parse(localStorage.getItem("favorites"))||[]).find(e=>e.id===t.id)?`<button data-id="${t.id}" data-title="${t.title}"class="button-round button-smal button-danger">Удалить</bytton>`:`<button data-id="${t.id}" data-title="${t.title}"class="button-round button-smal button-primary">Сохранить</bytton>`;return`<div class="panel">\n                <div class="panel-head">\n                    <p class="panel-title">${t.title}</p>\n                    <ul class="tags">\n                        ${n}\n                    </ul>\n                </div>\n                <div class="panel-body">\n                    <p class="multi-line">${t.fulltext}</p>\n                </div>\n                <div class="panel-footer w-panel-footer">\n                    <small>${t.date}</small>\n                    ${e.withButton?i:""}\n                </div>\n            </div>`}async function p(t){if(t.preventDefault(),t.target.classList.contains("js-link")){const e=t.target.dataset.id;this.$el.innerHTML=" ",this.loader.show();const n=await u.fetchPostById(e);this.loader.hide(),this.$el.insertAdjacentHTML("afterbegin",f(n,{withButton:!1}))}}class h{static fbObjectToArray(t){return Object.keys(t).map(e=>{const n=t[e];return n.id=e,n})}}function v(t){const e=t.target,n=e.dataset.id,i=e.dataset.title;if(n){let t=JSON.parse(localStorage.getItem("favorites"))||[];t.find(t=>t.id===n)?(e.textContent="Coхранить",e.classList.add("button-primary"),e.classList.remove("button-danger"),t=t.filter(t=>t.id!==n)):(e.textContent="Удалить",t.push({id:n,title:i}),e.classList.remove("button-primary"),e.classList.add("button-danger")),localStorage.setItem("favorites",JSON.stringify(t))}}new class extends i{constructor(t){super(t)}init(){localStorage.getItem("visited")&&this.hide(),this.$el.querySelector(".js-header-start").addEventListener("click",r.bind(this))}}("header");const m=new class extends i{constructor(t){super(t),this.tabs=[]}init(){this.$el.addEventListener("click",s.bind(this))}registerTabs(t){this.tabs=t}}("navigation"),b=new class extends i{constructor(t){super(t)}}("loader"),g=new class extends i{constructor(t,{loader:e}){super(t),this.loader=e}init(){this.$el.addEventListener("click",v.bind(this))}async onShow(){this.loader.show();const t=await u.fetchPosts(),e=h.fbObjectToArray(t).map(t=>f(t,{withButton:!0}));this.loader.hide(),this.$el.insertAdjacentHTML("afterbegin",e.join(" "))}onHide(){this.$el.innerHTML=""}}("posts",{loader:b}),y=new class extends i{constructor(t){super(t)}init(){this.$el.addEventListener("submit",d.bind(this)),this.form=new o(this.$el,{title:[c.required],fulltext:[c.required,c.minLength(10)]})}}("create"),w=new class extends i{constructor(t,{loader:e}){super(t),this.loader=e}init(){this.$el.addEventListener("click",p.bind(this))}onShow(){const t=function(t=[]){if(t&&t.length)return`\n            <ul>\n                ${t.map(t=>`<li><a href="#" class="js-link" data-id="${t.id}">${t.title}</a></li >`).join(" ")}\n            </ul>\n        `;return'<p class="center">Ничего не добавлено</p>'}(JSON.parse(localStorage.getItem("favorites")));this.$el.insertAdjacentHTML("afterbegin",t)}onHide(){this.$el.innerHTML=""}}("favorite",{loader:b});m.registerTabs([{name:"create",component:y},{name:"posts",component:g},{name:"favorite",component:w}])}]);